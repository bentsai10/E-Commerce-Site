<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Post New Quaranthing</title>
        {% load static %}
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/js/all.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
        <script type="text/javascript">
            var loadFile = function(event) {
                var section = document.getElementById('output');
                var output = "";
                for(var i = 0; i < event.target.files.length; i++){
                    output += "<img class = 'thumbnail' style = 'margin-right: 20px; margin-top: 20px; border: 1px solid black;' id = '" + i +  "'>";
                    document.getElementById('output').innerHTML = output;
                    var image = document.getElementById(i);
                    image.src = URL.createObjectURL(event.target.files[i]);
                    output = document.getElementById('output').innerHTML;
                }
            };
            function yesnoCheck() {
                if (document.getElementById('activity_cat').checked) {
                    var elems = document.getElementsByClassName('activity'),
                    size = elems.length;
                    for(var i = 0; i < size; i++){
                        var activity = elems[i];
                        activity.style.display = 'flex';
                    }
                    elems = document.getElementsByClassName('diy');
                    size = elems.length;
                    for(var i = 0; i < size; i++){
                        var diy = elems[i];
                        diy.style.display = 'none';
                    }
                }
                else {
                    console.log('whoop');
                    var elems = document.getElementsByClassName('activity'),
                    size = elems.length;
                    for(var i = 0; i < size; i++){
                        var activity = elems[i];
                        activity.style.display = 'none';
                    }
                    elems = document.getElementsByClassName('diy');
                    size = elems.length;
                    for(var i = 0; i < size; i++){
                        var diy = elems[i];
                        diy.style.display = 'flex';
                    }
                }
            }
        </script>
        <style>
            img{
                height:180px;
                width:180px;
            }
            .icons{
                height: 40px;
                width: 40px;
            }
            #cart_items{
                color: #f2af58;
                margin-left: 9px;
                margin-top:-42px;
                display: block;
            }
            .fa-shopping-cart{
                margin-top: 10px;
            }
            .fa-shopping-cart:hover{
              color: white !important;
            }
            .field{
                margin-bottom: 20px;
            }
            .long_input{
                width: 100%;
                display: block;
            }
            textarea{
                height: 20vh;
            }
            .small_field{
                width: 320px;
            }
            .small_input{
                width: 120px;
            }
            .category{
                margin-right: 41px;
            }
            .btn-primary,  .btn-primary:active, .btn-primary:visited {
                background-color: #a45fc1 !important;
                border: none;
            }
            .btn-primary:hover{
                background-color: violet !important;
            }
            .btn-secondary,  .btn-secondary:active, .btn-secondary:visited {
                background-color: #f2af58 !important;
                border: none;
            }
            .btn-secondary:hover{
                background-color: gold !important;
            }
            .login{
                height: 50px;
                width: 250px;
            }
            .h2{
                font-weight:300 !important;
            }
        </style>
    </head>
    <body>
        <nav class="navbar navbar-expand-md bg-dark navbar-dark">
            <a class="navbar-brand" href="http://localhost:8000"><img src="{% static 'logo.png' %}" alt="Quaranthings logo" class = "icons"></a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="http://localhost:8000">Home <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="http://localhost:8000/quaranthings/top_picks">Top Picks<span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="friends" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Quaranthing w/ Friends</a>
                        <div class="dropdown-menu" aria-labelledby="friends">
                            <div class = "row" style="width:600px;">
                                <ul class="list-unstyled col-md-4">
                                    <h6 class="dropdown-header">Food</h6>
                                    <li><a class="dropdown-item" href="http://localhost:8000/quaranthings/breakfast%20date">Breakfast Date</a></li>
                                    <li><a class="dropdown-item" href="http://localhost:8000/quaranthings/lunch%20date">Lunch Date</a></li>
                                    <li><a class="dropdown-item" href="http://localhost:8000/quaranthings/dinner%20date">Dinner Date</a></li>
                                    <li><a class="dropdown-item" href="http://localhost:8000/quaranthings/cook%20together">Cook Together</a></li>
                                    <li><a class="dropdown-item" href="http://localhost:8000/quaranthings/cooking%20class">Cooking Classes</a></li>
                                </ul>
                                <ul class="list-unstyled col-md-4">
                                    <h6 class="dropdown-header">Catch Up</h6>
                                    <li><a class="dropdown-item" href="http://localhost:8000/quaranthings/quick%20chat">Quick Chat</a></li>
                                    <li><a class="dropdown-item" href="http://localhost:8000/quaranthings/video%20call">Video Call</a></li>
                                    <li><a class="dropdown-item" href="http://localhost:8000/quaranthings/homework%20session">Homework Session</a></li>
                                    <h6 class="dropdown-header">Games</h6>
                                    <li><a class="dropdown-item" href="http://localhost:8000/quaranthings/gaming%20party">Gaming Party</a></li>
                                    
                                    <li><a class="dropdown-item" href="http://localhost:8000/quaranthings/board%20game%20night">Board Game Night</a></li>
                                </ul>
                                <ul class="list-unstyled col-md-4">
                                    <h6 class="dropdown-header">Exercise</h6>
                                    <li><a class="dropdown-item" href="http://localhost:8000/quaranthings/hiking%20outing">Hiking Outing</a></li>
                                    <li><a class="dropdown-item" href="http://localhost:8000/quaranthings/joint%20workout">Joint Workout</a></li>
                                    <h6 class="dropdown-header">Random Fun</h6>
                                    <li><a class="dropdown-item" href="http://localhost:8000/quaranthings/movie%20showing">Movie Showing</a></li>
                                    <li><a class="dropdown-item" href="http://localhost:8000/quaranthings/shopping%20spree">Shopping Spree</a></li>
                                    <li><a class="dropdown-item" href="http://localhost:8000/quaranthings/karaoke%20jam">Karaoke Jam</a></li>
                                </ul>
                            </div>
                        </div>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="diy" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">DIY Items</a>
                        <div class="dropdown-menu" aria-labelledby="diy">
                            <h6 class="dropdown-header">Wearables</h6>
                            <a class="dropdown-item" href="http://localhost:8000/quaranthings/face%20masks">Face Masks</a>
                            <a class="dropdown-item" href="http://localhost:8000/quaranthings/clothing">Clothing</a>
                            <a class="dropdown-item" href="http://localhost:8000/quaranthings/shoes">Shoes</a>
                            <div class = "dropdown-divider"></div>
                            <h6 class="dropdown-header">Other</h6>
                            <a class="dropdown-item" href="http://localhost:8000/quaranthings/photo%20frames">Photo Frames</a>
                            <a class="dropdown-item" href="http://localhost:8000/quaranthings/decorations">Decorations</a>
                            <a class="dropdown-item" href="http://localhost:8000/quaranthings/miscellaneous%20items">Miscellaneous</a>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Find Quarangivers</a>
                    </li>
                </ul>
        
                <ul class="navbar-nav ml-auto">
                <form class="form-inline  my-lg-0">
                    <input class="form-control mr-sm-2" type="search" placeholder="Search Quaranthings" aria-label="Search" id = "search">
                    <button class="btn btn-success my-2 my-sm-0" type="submit">Search</button>
                    </form>
                <li class="nav-item">
                    <a class="nav-link nav_svg_link" href="#"><i class="fas fa-shopping-cart fa-lg" style = "color: #999d9f;" id = "cart"></i><p id = "cart_items">0</p></a>
                </li>
                {% if request.session.logged_user %}
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="user" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fas fa-user-circle fa-2x"></i></a>
                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="user">
                    <a class="dropdown-item" href="http://localhost:8000/quaranthings/new">Post Quaranthings</a>
                    <a class="dropdown-item" href="#">My Orders</a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="http://localhost:8000/logout">Log Out</a>
                    </div>
                </li>
                {% else %}
                <li>
                    <a href="http://localhost:8000/login" class = "btn btn-link" style = "margin-top: 6px;">Login</a>
                </li>
                {% endif %}
                </ul>
      
            </div>
        </nav>
        {% if request.session.logged_user %}
        <div class = "container" style = "padding: 20px 5px;">
            <h1 class = "display-4">List a Quaranthing</h1>
            <div class = "dropdown-divider" style="border-top: 1px solid black !important; opacity: 30%; margin-top: 20px;"></div>
            <div class = "container" style="margin-top: 20px;">
                <form action="http://localhost:8000/quaranthings/process_new_quaranthing" method = "POST" enctype="multipart/form-data" style="padding: 0px 4px">
                    {% csrf_token %}
                    {% if messages %}
                    <ul style="list-style-type: square; margin-left: -20px;">
                        {% for message in messages %}
                        <li style="color: red; font-size: 12px;">{{message}}</li>
                        {% endfor %}
                    </ul>
                    {% endif %}
                    <div class = "field">
                        <label class = "lead">Quaranthing Name:</label>
                        <input type="text" name="name" class = "long_input" required>
                    </div>
                    <div class = "field">
                        <label class = "lead">Quaranthing Description:</label>
                        <textarea name="description" class = "long_input"></textarea>
                    </div>
                    <div style = "width: fit-content; display: flex;">
                        <div class = "field small_field" style="margin-right: 70px;">
                            <label class = "lead">Quaranthing Type:</label>
                            <label>Activity</label>
                            <input type="radio" name="thing_type" value = "activity" checked="checked" id = "activity_cat" onclick="javascript:yesnoCheck();">
                            <label style = "margin-left: 5px;">DIY Item</label>
                            <input type="radio" name="thing_type" value = "diy_item" id = "diy_cat" onclick="javascript:yesnoCheck();">
                        </div>
                        <div class = "field small_field" style="margin-right: 70px;">
                            <label class = "lead">Quaranthing Price:</label>
                            <input type="number" step="0.01" name="price" class = "small_input" value = "0" required>
                        </div>
                        <div class = "field small_field">
                            <label class = "lead">Quaranthing Quantity:</label>
                            <input type="number" name="stock" class = "small_input" value = "1" required>
                        </div>
                    </div>
                    <div class = "field">
                        <label class = "lead" style="display: block;">Quaranthing Categories: <span style="font-size: 12px;">(Please choose at least one category, otherwise your quaranthing won't be able to be discovered)</span></label>
                        <div style = "display:flex;">
                        {% for category in activity_categories %}
                        {% if forloop.counter0|divisibleby:5 %}
                        </div>
                        <div class = "activity" style="display: flex;">
                            <div class = "category" style="width: 170px;">
                                <input type="checkbox" name="{{category.name}}">
                                <label>{{category.name}}</label>
                            </div>
                        {% else %}
                            <div class = "category" style="width: 170px;">
                                <input type="checkbox" name="{{category.name}}">
                                <label>{{category.name}}</label>
                            </div>
                        {% endif %}
                        {% endfor %}
                        </div>
                        <div style = "display: flex;">
                            {% for category in diy_categories %}
                            {% if forloop.counter0|divisibleby:5 %}
                            </div>
                            <div class = "diy" style = "display: none;">
                                <div class = "category" style="width: 170px;">
                                    <input type="checkbox" name="{{category.name}}">
                                    <label>{{category.name}}</label>
                                </div>
                            {% else %}
                                <div class = "category" style="width: 170px;">
                                    <input type="checkbox" name="{{category.name}}">
                                    <label>{{category.name}}</label>
                                </div>
                            {% endif %}
                            {% endfor %}
                            </div>
                    </div>
                    <div class = "field">
                        <label class = "lead">Quaranthing Photos:</label>
                        <input type="file"  accept="image/*" name="image" id="file"  onchange="loadFile(event)" style="display: none;" multiple>
                        <label class = "btn btn-primary" for="file" style="cursor: pointer;">Upload Image</label>
                        <p id="output" style="margin-right: 20px;"></p>
                    </div>
                    <input type="hidden" name="seller" value = "{request.session.logged_user}">
                    <button class = "btn btn-primary ml-auto" style = "display: block;">List Quaranthing!</button>
                </form>
            </div>
        </div>
        {% else %}
        <div class = "container" style = "padding: 20px 5px;">
            <h1 class = "h1">Login/Register to List Quaranthings!</h1>
            <div style = "width: fit-content;  margin: 50px auto;">
                <a href="http://localhost:8000/register" class = "btn btn-secondary login" style="margin-right: 50px;"><p class = "h2">Register</p></a>
                <a href="http://localhost:8000/login" class = "btn btn-primary login"><p class = "h2">Login</p></a>
            </div>
        </div>
        {% endif %}
    </body>
</html>